<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ë–∞—Å—Ç–∏–æ–Ω ‚Äî –ò–Ω–≥–æ—Å—Å—Ç—Ä–∞—Ö</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- –ì–µ—Ä–æ–π—Å–∫–∞—è —Å–µ–∫—Ü–∏—è -->
  <header class="hero-section">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-logo">
        <div class="logo-icon">üèõÔ∏è</div>
        <h1 class="hero-title">–ò–ù–ì–û–°–°–¢–†–ê–•</h1>
        <div class="hero-subtitle">–ò–º—É—â–µ—Å—Ç–≤–æ –§–∏–∑–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü</div>
      </div>
    </div>
    <div class="hero-decoration">
      <div class="decoration-element"></div>
      <div class="decoration-element"></div>
      <div class="decoration-element"></div>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main-content">
    <div class="container">
      <a href="index.html" class="back-button">
        <span>‚Üê</span> <span>–ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤</span>
      </a>
      <div class="header"><h1 style="margin:0">–ë–∞—Å—Ç–∏–æ–Ω</h1></div>

    <div class="card" style="margin-top:12px">
      <div class="h2">–û–ø–∏—Å–∞–Ω–∏–µ</div>
      <div class="small-block">–ü—Ä–æ–¥—É–∫—Ç –ø–æ –∑–∞—â–∏—Ç–µ –æ—Ç –≤–æ–µ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤ –∂–∏–ª—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ –∏ –ø–æ–¥-–æ–±—ä–µ–∫—Ç—ã (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤/–æ—Ç–¥–µ–ª–∫–∞). –¢–∞—Ä–∏—Ñ—ã —Å–∫—Ä—ã—Ç—ã.</div>
    </div>

    <div class="grid" style="margin-top:8px">
      <div class="card">
        <div class="h2">–¢–∏–ø –æ–±—ä–µ–∫—Ç–∞</div>
        <label><input type="radio" name="objt" value="flat"> –ö–≤–∞—Ä—Ç–∏—Ä–∞ / –ö–æ–º–Ω–∞—Ç–∞</label>
        <label style="margin-left:8px"><input type="radio" name="objt" value="house"> –ñ–∏–ª–æ–π –¥–æ–º / –¢–∞—É–Ω—Ö–∞—É—Å</label>

        <div class="box" style="margin-top:12px">
          <label><input type="checkbox" id="b_cons"> –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</label>
          <div style="margin-left:12px">–°—É–º–º–∞: <input id="b_sum_cons" type="number"></div>
        </div>

        <div class="box">
          <label><input type="checkbox" id="b_finish"> –û—Ç–¥–µ–ª–∫–∞ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</label>
          <div style="margin-left:12px">–°—É–º–º–∞: <input id="b_sum_finish" type="number"></div>
        </div>

        <div id="b_error" class="error"></div>
        <div id="b_result" class="total">–ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–µ–º–∏—è: 0 ‚ÇΩ</div>

      </div>

      <div class="card">
        <div class="h2">–†–∏—Å–∫–∏ (—Ç–æ—á–Ω–æ –ø–æ –ø—Ä–∞–≤–∏–ª—É)</div>
        <div class="small-block">
          ‚ñ∫ –í–æ–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π, –º–∞–Ω–µ–≤—Ä–æ–≤, —É—á–µ–Ω–∏–π –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ–µ–Ω–Ω–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –ª—é–±–æ–≥–æ —Ä–æ–¥–∞, –≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ç—Ä—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—é –º–∏—Ä–∞, –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤, –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –æ–ø–æ–ª—á–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–æ–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–ª–∏ –∞–Ω—Ç–∏—Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.<br><br>
          ‚ñ∫ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ –≤–∏–¥–∞ –æ—Ä—É–∂–∏—è, —Ä–∞–∫–µ—Ç, —Å–Ω–∞—Ä—è–¥–æ–≤, –º–∏–Ω, –±–æ–º–± –∏ –∏–Ω—ã—Ö –±–æ–µ–ø—Ä–∏–ø–∞—Å–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–µ–π—Å—Ç–≤–∏–π —Å–∏–ª –ø—Ä–æ—Ç–∏–≤–æ–≤–æ–∑–¥—É—à–Ω–æ–π –æ–±–æ—Ä–æ–Ω—ã.<br><br>
          ‚ñ∫ –í–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –ø–∏–ª–æ—Ç–∏—Ä—É–µ–º—ã—Ö –∏ –±–µ—Å–ø–∏–ª–æ—Ç–Ω—ã—Ö –ª–µ—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –∞–ø–ø–∞—Ä–∞—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è –ø–∞–¥–µ–Ω–∏–µ –∏—Ö —á–∞—Å—Ç–µ–π), –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ —Å–≤—è–∑–∏ —Å –≤–æ–µ–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏... (–ø.14.1.3).<br><br>
          ‚ñ∫ ¬´–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å¬ª ‚Äî –ø—Ä–∏—á–∏–Ω–µ–Ω–∏–µ –≤—Ä–µ–¥–∞ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—é —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.<br><br>
          ‚ñ∫ ¬´–¢–µ—Ä–∞–∫—Ç¬ª ‚Äî –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –ª–∏–±–æ —É—Ç—Ä–∞—Ç–∞ –∏–º—É—â–µ—Å—Ç–≤–∞ –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–∫—Ç–∞.<br><br>
          ‚ñ∫ ¬´–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ¬ª ‚Äî –ø–∞–¥–µ–Ω–∏–µ –ë–ü–õ–ê –ª–∏–±–æ –∏—Ö —á–∞—Å—Ç–µ–π.
        </div>

        <div class="box" style="margin-top:12px">
          <div class="h2">–ó–∞–ø—Ä–µ—Ç–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã</div>
          <div class="small-block">
            ‚Ä¢ –õ–ù–†, –î–ù–†, –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º, –•–µ—Ä—Å–æ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å, –°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å; ‚Ä¢ –ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è, –ö—É—Ä—Å–∫–∞—è, –ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç–∏; ‚Ä¢ –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–π–æ–Ω—ã –í–æ—Ä–æ–Ω–µ–∂—Å–∫–æ–π, –†–æ—Å—Ç–æ–≤—Å–∫–æ–π, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–æ–≥–æ –∫—Ä–∞–µ–≤–æ–π –ø–µ—Ä–µ—á–Ω—è; ‚Ä¢ –ó–∞–ø–æ—Ä–æ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å; ‚Ä¢ –ù–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ; ‚Ä¢ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.
          </div>
        </div>
      </div>
    </div>
  </main>

  <script type="module">
    import { T_BASTION } from './tariffs.bastion.js';
    const get = id => document.getElementById(id);
    const err = get('b_error');
    const res = get('b_result');

    function fmt(n){return new Intl.NumberFormat('ru-RU').format(Math.round(n));}

    function updateBastion(){
      err.textContent = '';
      res.textContent = '–ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–µ–º–∏—è: 0 ‚ÇΩ';
      const type = document.querySelector('input[name="objt"]:checked')?.value;
      if (!type) { err.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞'; return; }

      const consChecked = get('b_cons').checked;
      const finishChecked = get('b_finish').checked;
      if (!consChecked && !finishChecked) { err.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–æ–¥-–æ–±—ä–µ–∫—Ç'; return; }

      let total = 0;
      if (consChecked){
        const v = Number(get('b_sum_cons').value || 0);
        const min = T_BASTION[type].cons.min, max = T_BASTION[type].cons.max;
        if (v < min || v > max) { err.textContent = `–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤: –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω ${min.toLocaleString()} ‚Äî ${max.toLocaleString()} ‚ÇΩ`; return; }
        total += v * T_BASTION[type].cons.rate;
      }
      if (finishChecked){
        const v = Number(get('b_sum_finish').value || 0);
        const min = T_BASTION[type].finish.min, max = T_BASTION[type].finish.max;
        if (v < min || v > max) { err.textContent = `–û—Ç–¥–µ–ª–∫–∞: –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω ${min.toLocaleString()} ‚Äî ${max.toLocaleString()} ‚ÇΩ`; return; }
        total += v * T_BASTION[type].finish.rate;
      }

      res.textContent = '–ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–µ–º–∏—è: ' + fmt(total) + ' ‚ÇΩ';
    }

    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.querySelectorAll('input[name="objt"]').forEach(r => r.addEventListener('change', updateBastion));
    get('b_cons').addEventListener('change', updateBastion);
    get('b_finish').addEventListener('change', updateBastion);
    get('b_sum_cons').addEventListener('input', updateBastion);
    get('b_sum_finish').addEventListener('input', updateBastion);
  </script>
</body>
</html>
